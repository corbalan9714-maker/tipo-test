<script>
// Forzar refresco del test al cambiar a la pestaña Test
(function () {
  let iframeEditor = document.getElementById("iframeEditor");
  let iframeTest = document.getElementById("iframeTest");

  const btnEditor = document.getElementById("btnEditor");
  const btnTest = document.getElementById("btnTest");

  btnEditor.onclick = () => {
    iframeEditor.style.display = "block";
    iframeTest.style.display = "none";
    btnEditor.classList.add("activo");
    btnTest.classList.remove("activo");
  };

  btnTest.onclick = () => {
    iframeEditor.style.display = "none";
    iframeTest.style.display = "block";
    btnEditor.classList.remove("activo");
    btnTest.classList.add("activo");

    // Forzar actualización del test
    if (iframeTest.contentWindow) {
      iframeTest.contentWindow.postMessage({ type: "REFRESCAR_TEST" }, "*");
    }
  };

  // Estado inicial
  iframeEditor.style.display = "block";
  iframeTest.style.display = "none";
})();
</script>